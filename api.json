{"openapi":"3.0.1","info":{"title":"AniLinkService API 文档","description":"基于弹弹play开放平台搭建的番剧识别与弹幕播放器","version":"1.0.0"},"servers":[{"url":"/","description":"默认服务器地址"}],"tags":[{"name":"认证服务","description":"进行认证操作的相关接口"},{"name":"站点配置","description":"站点配置相关接口"},{"name":"媒体库管理","description":"用于管理媒体库"}],"paths":{"/api/site/config":{"get":{"tags":["站点配置"],"summary":"获取站点配置","description":"获取站点名称、描述、URL等配置信息","operationId":"getSiteConfig","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseVOSiteConfigVO"}}}}}},"post":{"tags":["站点配置"],"summary":"设置站点配置","description":"设置站点信息和管理员账号密码，用于安装引导","operationId":"setSiteConfig","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SetSiteConfigRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseVOString"}}}}}}},"/api/media-library":{"get":{"tags":["媒体库管理"],"summary":"获取所有媒体库","description":"查询并返回系统中所有已配置的媒体库","operationId":"getAllLibraries","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/MediaLibraryVO"}}}}}}},"post":{"tags":["媒体库管理"],"summary":"添加媒体库","description":"添加一个新的媒体库，并立即触发一次扫描","operationId":"addLibrary","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MediaLibraryDTO"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/MediaLibraryVO"}}}}}}},"/api/media-library/scan/{id}":{"post":{"tags":["媒体库管理"],"summary":"扫描指定媒体库","description":"根据ID手动触发一次指定媒体库的扫描","operationId":"scanLibrary","parameters":[{"name":"id","in":"path","description":"要扫描的媒体库ID","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK"}}}},"/api/media-library/scan-all":{"post":{"tags":["媒体库管理"],"summary":"扫描所有媒体库","description":"手动触发一次对所有媒体库的扫描","operationId":"scanAllLibraries","responses":{"200":{"description":"OK"}}}},"/api/auth/login":{"post":{"tags":["认证服务"],"summary":"登录","description":"登录并返回token","operationId":"doLogin","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiResponseVOSaTokenInfo"}}}}}}},"/api/media-library/paths":{"get":{"tags":["媒体库管理"],"summary":"查询服务端路径","description":"查询指定根目录下的所有文件和文件夹路径，支持筛选","operationId":"listServerPaths","parameters":[{"name":"rootPath","in":"query","required":true,"schema":{"type":"string"}},{"name":"onlyDir","in":"query","required":false,"schema":{"type":"boolean","default":false}},{"name":"fileType","in":"query","required":false,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/PathVO"}}}}}}}},"/api/media-library/{id}":{"delete":{"tags":["媒体库管理"],"summary":"删除媒体库","description":"根据ID删除指定的媒体库","operationId":"deleteLibrary","parameters":[{"name":"id","in":"path","description":"要删除的媒体库ID","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK"}}}}},"components":{"schemas":{"SetSiteConfigRequest":{"type":"object","properties":{"siteName":{"type":"string","description":"站点名称","example":"AniLink Service"},"siteDescription":{"type":"string","description":"站点描述","example":"番剧识别与弹幕播放服务"},"siteUrl":{"type":"string","description":"站点URL","example":"http://localhost:8081"},"adminUsername":{"type":"string","description":"管理员账号","example":"admin"},"adminPassword":{"type":"string","description":"管理员密码","example":"123456"}},"description":"设置站点配置请求"},"ApiResponseVOString":{"type":"object","properties":{"code":{"type":"integer","format":"int32"},"msg":{"type":"string"},"data":{"type":"string"}}},"MediaLibraryDTO":{"type":"object","properties":{"name":{"type":"string","description":"媒体库的名称","example":"我的动漫"},"path":{"type":"string","description":"媒体库的物理路径","example":"/data/anime"}},"description":"媒体库数据传输对象，用于创建新的媒体库"},"MediaLibraryVO":{"type":"object","properties":{"id":{"type":"integer","description":"媒体库的唯一标识符","format":"int64"},"name":{"type":"string","description":"媒体库的名称","example":"我的动漫"},"path":{"type":"string","description":"媒体库的物理路径","example":"/data/anime"},"status":{"type":"string","description":"媒体库当前状态","example":"OK","enum":["OK","ERROR"]}},"description":"媒体库视图对象，用于展示媒体库信息"},"LoginRequest":{"type":"object","properties":{"username":{"type":"string","description":"用户名","example":"admin"},"password":{"type":"string","description":"密码","example":"123456"}},"description":"登录请求"},"ApiResponseVOSaTokenInfo":{"type":"object","properties":{"code":{"type":"integer","format":"int32"},"msg":{"type":"string"},"data":{"$ref":"#/components/schemas/SaTokenInfo"}}},"SaTokenInfo":{"type":"object","properties":{"tokenName":{"type":"string"},"tokenValue":{"type":"string"},"isLogin":{"type":"boolean"},"loginId":{"type":"object"},"loginType":{"type":"string"},"tokenTimeout":{"type":"integer","format":"int64"},"sessionTimeout":{"type":"integer","format":"int64"},"tokenSessionTimeout":{"type":"integer","format":"int64"},"tokenActiveTimeout":{"type":"integer","format":"int64"},"loginDeviceType":{"type":"string"},"tag":{"type":"string"}}},"ApiResponseVOSiteConfigVO":{"type":"object","properties":{"code":{"type":"integer","format":"int32"},"msg":{"type":"string"},"data":{"$ref":"#/components/schemas/SiteConfigVO"}}},"SiteConfigVO":{"type":"object","properties":{"siteName":{"type":"string","description":"站点名称","example":"AniLink Service"},"siteDescription":{"type":"string","description":"站点描述","example":"番剧识别与弹幕播放服务"},"siteUrl":{"type":"string","description":"站点URL","example":"http://localhost:8081"},"installed":{"type":"boolean","description":"是否已安装","example":true}},"description":"站点配置信息"},"PathVO":{"type":"object","properties":{"name":{"type":"string","description":"名称（文件或文件夹名）","example":"anime"},"path":{"type":"string","description":"绝对路径","example":"/data/anime"},"type":{"type":"string","description":"类型（directory/file）","example":"directory"}},"description":"服务端路径视图对象，用于展示文件/文件夹信息"}}}}